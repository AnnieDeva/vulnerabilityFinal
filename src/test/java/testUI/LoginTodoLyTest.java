package testUI;

import io.qameta.allure.Description;
import io.qameta.allure.Owner;
import io.qameta.allure.junit4.DisplayName;
import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import pages.*;
import session.Session;

public class LoginTodoLyTest {

    LoginModalPageExistent loginModalPageE = new LoginModalPageExistent();
    MainPage mainPage = new MainPage();
    PageAddingDeleteProject pageAddingProject = new PageAddingDeleteProject();

    @Before
    public void before(){
        Session.getInstance().getDriver().get("http://todo.ly/");
    }

    @DisplayName("verify The Login Using User And Password")
    @Description("This test case is to verify verify The Login in Existent User Using User And Password")
    @Owner("Daniela Vidal")
    @Test
    public void verifyTheLoginUsingUserAndPassword() throws InterruptedException {
        //login with existent user
        mainPage.loginButton.click();
        loginModalPageE.emailTextBox.type("ucb701@ucb.com");
        loginModalPageE.passwordTextBox.type("ucb123");
        loginModalPageE.loginButton.click();

       // create new Project
        pageAddingProject.startAddProjectButton.click();
        pageAddingProject.nameNewProject.type("NewProject001");
        pageAddingProject.addProjectButton.click();

        // Verification
        Thread.sleep(2000);

        Assert.assertTrue("ERROR , el proyecto no se cre√≥!",pageAddingProject.nameNewProject.isDisplayedOnPage());

    }

    @After
    public void after(){
        Session.getInstance().closeBrowser();
    }
}
